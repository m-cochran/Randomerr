---
layout: default
paginate: true
title: Hub
---

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Category Data</title>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Parse query parameters from the URL
      const urlParams = new URLSearchParams(window.location.search);
      const region = urlParams.get('region');
      const province = urlParams.get('province');
      const city = urlParams.get('city');
      const category = urlParams.get('category');
     
      // Fetch JSON data and display relevant results
      fetch('https://m-cochran.github.io/Randomerr/data/categories.json')
        .then(response => response.json())
        .then(data => {
          const lowerRegion = region?.toLowerCase();
          const lowerProvince = province?.toLowerCase();
          const lowerCity = city?.toLowerCase();
          const lowerCategory = category?.replace('-', ' '); // Convert dashes to spaces but keep case-sensitive comparison
         
          // Check if data exists for the selected location and category
          const results = data?.regions?.[lowerRegion]?.[lowerProvince]?.[lowerCity]?.categories?.[lowerCategory];
          if (results && results.length > 0) {
            const resultsContainer = document.getElementById('results');
            resultsContainer.innerHTML = ''; // Clear existing content
            results.forEach(item => {
              const div = document.createElement('div');
              div.innerHTML = `
                    <h3>${item.title}</h3>
                    <img src="${item.picture}" alt="${item.title}" style="max-width: 200px;" />
                    <p><strong>Location:</strong> ${item.location}</p>
                    <p><strong>Price:</strong> ${item.price}</p>
                    <p><strong>Date:</strong> ${item.date}</p>
                    <p>${item.description}</p>
                `;
              resultsContainer.appendChild(div);
            });
          } else {
            document.getElementById('results').textContent = 'No events found for this category.';
          }
        })
        .catch(error => {
          console.error('Error loading data:', error);
          document.getElementById('results').textContent = 'Error loading data.';
        });
    });
  </script>


</head>

<body>
  <h1 id="category-title"></h1>
  <p id="category-description"></p>
  <div id="results"></div>

</body>

</html>
